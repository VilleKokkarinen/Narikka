(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(e,t,a){e.exports=a(181)},180:function(e,t,a){},181:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(36),l=a.n(c),o=a(15),s=a(208),i=a(96),u=a(29),m=a(78),d=a(103),h=a(97),p=a(19),E={loading:!1,info:null,error:null,success:null};var b={loading:!0,error:null,memberTypes:[{id:1,title:"---"},{id:2,title:"----- ---"}],members:[{placeholder:!0,id:"0",userName:"---- --- -- ------"}]};var f={loading:!0,error:null,chats:[{placeholder:!0,id:"0",name:"you don't have any chats yet. ",authorizedUsers:[{id:"0",userName:""},{id:"1",userName:""}]}]};var g={eventTypes:[{id:1,title:"---"},{id:2,title:"----- ---"}],events:[{placeholder:!0,id:"0",title:"---- --- -- ------",body:"---- --- -- ------ ---- --- -- ------ ---- --- -- ------ ---- --- -- ------",author:"---- ------ ",category:1,image:"https://firebasestorage.googleapis.com/v0/b/react-native-starter-app.appspot.com/o/image-1.jpg?alt=media&token=9f7c839b-2d40-4660-a2a0-bf6c2f64a2e5",details:["---- --- -- ------","---- ------ --- --"],info:["---- --- -- ------","---- ------ --- --"]}],favourites:[]};var v={rehydrated:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case"persist/REHYDRATE":return!0;default:return e}},status:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"STATUS_REPLACE":return Object(p.a)({},e,{loading:t.loading||!1,info:t.info||null,error:t.error||null,success:t.success||null});default:return e}},member:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOGIN":return t.data?Object(p.a)({},e,{uid:t.data.uid,email:t.data.email,emailVerified:t.data.emailVerified}):{};case"USER_DETAILS_UPDATE":return t.data?Object(p.a)({},e,{userName:t.data.userName,signedUp:t.data.signedUp,role:t.data.role}):{};case"USER_RESET":return{};default:return e}},members:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MEMBERTYPES_REPLACE":return Object(p.a)({},e,{error:null,loading:!1,memberTypes:t.data});case"MEMBERS_ERROR":return Object(p.a)({},e,{error:t.data});case"MEMBERS_REPLACE":var a=[];if(t.data&&"object"===typeof t.data){var n=t.data,r=[];for(var c in n)r.push(n[c]);a=r.map(function(e){return{id:e.id,userName:e.userName}})}return Object(p.a)({},e,{error:null,loading:!1,members:a});default:return e}},events:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FAVOURITES_REPLACE":return Object(p.a)({},e,{favourites:t.data||[]});case"EVENTTYPES_REPLACE":return Object(p.a)({},e,{error:null,loading:!1,eventTypes:t.data});case"EVENTS_ERROR":return Object(p.a)({},e,{error:t.data});case"EVENTS_REPLACE":var a=[];return t.data&&"object"===typeof t.data&&(a=Object.values(t.data).map(function(e){return{id:e.eventId,title:e.title,body:e.body,category:e.category,image:e.image,author:e.author,details:e.details,info:e.info}})),Object(p.a)({},e,{error:null,loading:!1,events:a});default:return e}},chats:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHATS_ERROR":return Object(p.a)({},e,{error:t.data});case"CHATS_REPLACE":var a=[];return t.data&&"object"===typeof t.data&&(a=Object.values(t.data).map(function(e){return{id:e.chat.id,name:e.chat.name,messages:Object.values(e.chat.messages).map(function(e){return{id:e.id,message:e.messagetext,timestamp:e.timestamp,author:e.author}})||{},authorizedUsers:Object.values(e.chat.authorizedUsers).map(function(e){return{id:e.id,userName:e.userName}})}})),Object(p.a)({},e,{error:null,loading:!1,chats:a});default:return e}}},y={key:"root",storage:d.a,blacklist:["status"]},w=Object(m.a)(y,v),O=[h.a],j=function(){var e=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,t=Object(u.e)(w,e(u.a.apply(void 0,O)));return{persistor:Object(m.b)(t,null,function(){t.getState()}),store:t}};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var N=a(211),S=a(207),k=a(183),C=a(184),x=a(185),P=a(41),T=function(e){var t=e.pageTitle,a=e.children;return r.a.createElement(k.a,null,r.a.createElement(P.Helmet,null,r.a.createElement("title",null,t)),r.a.createElement(C.a,null,r.a.createElement(x.a,{sm:"12"},a)))};T.defaultProps={pageTitle:"React App"};var L=T,R=a(9),A=a(11),F=a(10),D=a(12),U=a(14),M=a.n(U),_=a(23),I={default:"Hmm, an unknown error occured",timeout:"Server Timed Out. Check your internet connection",invalidJson:"Response returned is not valid JSON",invalidFirebase:"Firebase is not connected correctly",memberExists:"Member already exists",missingFirstName:"First name is missing",missingLastName:"Last name is missing",missingEmail:"Email is missing",missingPassword:"Password is missing",passwordsDontMatch:"Passwords do not match",event04:"Event not found"},B=a(59),V="AIzaSyDZfOkLwdFwrqn8DFFhPPhsi4Gq6uP9P8g",z="narikka-kuopio.firebaseapp.com",H="https://narikka-kuopio.firebaseio.com",W="narikka-kuopio.appspot.com",q="980227290290",J=!1;V&&z&&H&&W&&q&&(B.initializeApp({apiKey:V,authDomain:z,databaseURL:H,storageBucket:W,messagingSenderId:q}),J=!0);var Y=J?B.database().ref():null,G=J?B:null;function K(e){var t=e.email,a=e.password,n=e.password2,r=e.userName;return function(){return new Promise(function(){var e=Object(_.a)(M.a.mark(function e(c,l){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",l({message:I.missingUserName}));case 2:if(t){e.next=4;break}return e.abrupt("return",l({message:I.missingEmail}));case 4:if(a){e.next=6;break}return e.abrupt("return",l({message:I.missingPassword}));case 6:if(n){e.next=8;break}return e.abrupt("return",l({message:I.missingPassword}));case 8:if(a===n){e.next=10;break}return e.abrupt("return",l({message:I.passwordsDontMatch}));case 10:return e.abrupt("return",G.auth().createUserWithEmailAndPassword(t,a).then(function(e){e&&e.user.uid&&Y.child("users/".concat(e.user.uid)).set({userName:r,id:e.user.uid,signedUp:G.database.ServerValue.TIMESTAMP,lastLoggedIn:G.database.ServerValue.TIMESTAMP}).then(c)}).catch(l));case 11:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()).catch(function(e){throw e.message})}}function X(e){var t=Y&&G&&G.auth()&&G.auth().currentUser&&G.auth().currentUser.uid?G.auth().currentUser.uid:null;return!!t&&Y.child("users/".concat(t)).on("value",function(t){var a=t.val()||[];return e({type:"USER_DETAILS_UPDATE",data:a})})}var Z=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(a=Object(A.a)(this,(e=Object(F.a)(t)).call.apply(e,[this].concat(c)))).componentDidMount=function(){(0,a.props.fetchData)()},a.render=function(){var e=a.props,t=e.Layout,n=e.member,c=e.memberLogout,l=e.Items;return r.a.createElement(t,{member:n,logout:c,Items:l})},a}return Object(D.a)(t,e),t}(n.Component),$={memberLogout:function(){return function(e){return new Promise(function(t,a){return G.auth().signOut().then(function(){return t(e({type:"USER_RESET"}))}).catch(a)}).catch(function(e){throw e.message})}},fetchData:function(){return null===G?function(){return new Promise(function(e){return e()})}:function(e){return new Promise(function(t){G.auth().onAuthStateChanged(function(a){return a?t(X(e)):function(){return new Promise(function(){return t()})}})})}}},Q=Object(o.b)(function(e){return{member:e.member||{}}},$)(Z),ee=a(20),te=a(13),ae=a(186),ne=a(188),re=a(189),ce=a(190),le=a(210),oe=a(191),se=a(192),ie=a(193),ue=a(187),me=a(209),de="Narikka",he=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(A.a)(this,Object(F.a)(t).call(this,e))).onLogout=function(){var e=a.props,t=e.history;(0,e.logout)().then(function(){return t.push("/login")})},a.toggleDropDown=function(){var e=a.state.isOpen;a.setState({isOpen:!e})},a.toggleDropDown=a.toggleDropDown.bind(Object(te.a)(Object(te.a)(a))),a.state={isOpen:!1},a}return Object(D.a)(t,e),Object(ee.a)(t,[{key:"render",value:function(){var e=this.props,t=e.member,a=e.Items,n=this.state.isOpen,c=!(!t||!t.email);return r.a.createElement("header",{style:{height:60}},r.a.createElement(ae.a,{dark:!0,expand:"sm",className:"fixed-top",style:{minHeight:60,justifyContent:"center",alignItems:"center"}},r.a.createElement(ue.a,{to:"/",className:"navbar-brand",style:{color:"#ffd970",height:40}},r.a.createElement("img",{src:"https://i.imgur.com/Dxkqw0C.png",alt:"header",className:"header-image"})," ",de),r.a.createElement(ne.a,{onClick:this.toggleDropDown}),r.a.createElement(re.a,{isOpen:n,navbar:!0},r.a.createElement(ce.a,{className:"ml-auto",navbar:!0},r.a.createElement("div",{className:"d-block d-sm-none"},a),r.a.createElement(le.a,{nav:!0},r.a.createElement(oe.a,{style:{color:"#ffd970",margin:"0.5rem 0.75rem",padding:0},nav:!0,caret:!0},c?"Hi, ".concat(t.userName):"My Account"),r.a.createElement(se.a,{style:{backgroundColor:"#1c1f25",padding:0,margin:0,border:"2px solid #66531d"}},!c&&r.a.createElement("div",null,r.a.createElement(ie.a,{style:{borderBottom:"1px solid #66531d"},tag:ue.a,to:"/login"},"Login"),r.a.createElement(ie.a,{tag:ue.a,to:"/sign-up"},"Sign Up")),c&&r.a.createElement("div",null,r.a.createElement(ie.a,{style:{borderBottom:"1px solid #66531d"},tag:ue.a,to:"/update-profile"},"Update Profile"),r.a.createElement(ie.a,{tag:"button",onClick:this.onLogout},"Logout"))))))))}}]),t}(n.Component);he.defaultProps={member:{}};var pe=Object(me.a)(he),Ee=function(){return r.a.createElement("footer",{className:"mt-5"},r.a.createElement(C.a,null,r.a.createElement(x.a,{sm:"12",className:"text-right pt-3"},r.a.createElement("p",null," -> ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/VilleKokkarinen"}," Github ")," | Dev: ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/VilleKokkarinen"}," Ville Kokkarinen ")))))},be=a(194),fe=function(){return r.a.createElement("div",null,r.a.createElement(be.a,null,r.a.createElement(ue.a,{className:"nav-link ".concat("/"===window.location.pathname&&"active"),to:"/"},r.a.createElement("i",{className:"icon-home"})," ",r.a.createElement("span",null,"Home"))),r.a.createElement(be.a,null,r.a.createElement(ue.a,{className:"nav-link ".concat(window.location.pathname.startsWith("/event")&&"active"),to:"/events"},r.a.createElement("i",{className:"icon-notebook"})," ",r.a.createElement("span",null,"Events"))),r.a.createElement(be.a,null,r.a.createElement(ue.a,{className:"nav-link ".concat(window.location.pathname.startsWith("/chats")&&"active"),to:"/chats"},r.a.createElement("i",{className:"icon-notebook"})," ",r.a.createElement("span",null,"Priv. Chats"))),r.a.createElement(be.a,null,r.a.createElement(ue.a,{className:"nav-link ".concat(window.location.pathname.startsWith("/member")&&"active"),to:"/members"},r.a.createElement("i",{className:"icon-notebook"})," ",r.a.createElement("span",null,"Members"))),r.a.createElement(be.a,null,r.a.createElement(ue.a,{className:"nav-link ".concat(window.location.pathname.startsWith("/create-event")&&"active"),to:"/create-event"},r.a.createElement("i",{className:"icon-notebook"})," ",r.a.createElement("span",{className:"text ".concat(window.location.pathname.startsWith("/create-event")&&"active")},"New Event"))))},ge=function(){return r.a.createElement(x.a,{sm:"2",md:"2",className:"d-none d-sm-block sidebar"},r.a.createElement(ce.a,{vertical:!0},fe()))},ve=function(e){var t=e.pageTitle,a=e.children,n=e.props;return r.a.createElement("div",null,r.a.createElement(P.Helmet,null,r.a.createElement("title",null,t)),r.a.createElement(Q,Object.assign({},n,{Layout:pe,Items:fe()})),r.a.createElement(k.a,{fluid:!0},r.a.createElement(C.a,null,r.a.createElement(ge,null),r.a.createElement(x.a,{className:"SideBarTemplateCol"},a,r.a.createElement(Ee,null)))))};ve.defaultProps={pageTitle:"React App"};var ye=ve,we=a(195),Oe=function(){return r.a.createElement("div",null,r.a.createElement(C.a,null,r.a.createElement(we.a,{className:"bg-primary text-white"},r.a.createElement("h1",null,"Web & Mobile App Starter Kit"),r.a.createElement("p",{className:"lead"},"narikka testisovellus"),r.a.createElement("p",null,"web + mobile app pohja"))),r.a.createElement(C.a,{className:"pt-md-2"},r.a.createElement(x.a,{xs:"12",md:"4",className:"pt-3 pt-md-0"},r.a.createElement("h3",null,r.a.createElement("i",{className:"icon-map"})," ","Routing"),r.a.createElement("p",null,"React Router is used to handle all web-side routing."),r.a.createElement("p",null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/ReactTraining/react-router",className:"btn btn-primary"},"React Router Docs"))),r.a.createElement(x.a,{xs:"12",md:"4",className:"pt-3 pt-md-0"},r.a.createElement("h3",null,r.a.createElement("i",{className:"icon-fire"})," ","Firebase"),r.a.createElement("p",null,"Firebase is all ready to go with examples on how to read/write data to/from Firebase."),r.a.createElement("p",null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://firebase.google.com/docs/database/web/start",className:"btn btn-primary"},"Firebase Docs"))),r.a.createElement(x.a,{xs:"12",md:"4",className:"pt-3 pt-md-0"},r.a.createElement("h3",null,r.a.createElement("i",{className:"icon-organization"})," ","Redux"),r.a.createElement("p",null,"State management the 'clean way' via Redux is setup with examples - woohoo!"),r.a.createElement("p",null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://redux.js.org/docs/introduction/",className:"btn btn-primary"},"Redux Docs")))),r.a.createElement(C.a,{className:"pt-md-5 pb-5"},r.a.createElement(x.a,{xs:"12",md:"4",className:"pt-3 pt-md-0"},r.a.createElement("h3",null,r.a.createElement("i",{className:"icon-layers"})," ","Redux Persist"),r.a.createElement("p",null,"Persist the data stored in Redux for faster load times without needing to hit the server each page load."),r.a.createElement("p",null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/rt2zz/redux-persist",className:"btn btn-primary"},"Redux Persist Docs"))),r.a.createElement(x.a,{xs:"12",md:"4",className:"pt-3 pt-md-0"},r.a.createElement("h3",null,r.a.createElement("i",{className:"icon-drop"})," ","Web Styles"),r.a.createElement("p",null,"Webpack, SCSS, Bootstrap and ReactStrap - ready at your fingertips."),r.a.createElement("p",null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://reactstrap.github.io/components/alerts/",className:"btn btn-primary"},"ReactStrap Docs"))),r.a.createElement(x.a,{xs:"12",md:"4",className:"pt-3 pt-md-0"},r.a.createElement("h3",null,r.a.createElement("i",{className:"icon-user-following"})," ","Auth"),r.a.createElement("p",null,"Most apps need user authentication. This one comes ready to go with Firebase Auth - but you can easily change that within the `/actions/member.js`"),r.a.createElement("p",null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://firebase.google.com/docs/auth/",className:"btn btn-primary"},"Firebase Auth Docs")))),r.a.createElement("hr",null))};var je=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(a=Object(A.a)(this,(e=Object(F.a)(t)).call.apply(e,[this].concat(c)))).state={error:null,loading:!1},a.componentDidMount=function(){return a.fetchData()},a.fetchData=function(e){var t=a.props,n=t.fetchEvents,r=t.fetchEventTypes;return a.setState({loading:!0}),n(e).then(function(){return r()}).then(function(){return a.setState({loading:!1,error:null})}).catch(function(e){return a.setState({loading:!1,error:e})})},a.render=function(){var e=a.props,t=e.Layout,n=e.events,c=e.match,l=a.state,o=l.loading,s=l.error,i=c&&c.params&&c.params.id?c.params.id:null;return r.a.createElement(t,{eventId:i,error:s,loading:o,events:n.events,reFetch:function(){return a.fetchEvents()}})},a}return Object(D.a)(t,e),t}(n.Component);je.defaultProps={match:null};var Ne={fetchEvents:function(){return null===G?function(){return new Promise(function(e){return e()})}:function(e){return new Promise(function(t){return Y.child("events").on("value",function(a){var n=a.val()||[];return t(e({type:"EVENTS_REPLACE",data:n}))})}).catch(function(e){throw e.message})}},fetchEventTypes:function(){return null===G?function(){return new Promise(function(e){return e()})}:function(e){return new Promise(function(t,a){return Y.child("eventTypes").once("value").then(function(a){var n=a.val()||[];return t(e({type:"EVENTTYPES_REPLACE",data:n}))}).catch(a)}).catch(function(e){throw e.message})}}},Se=Object(o.b)(function(e){return{events:e.events||{}}},Ne)(je),ke=a(196),Ce=a(197),xe=a(198),Pe=a(199),Te=function(e){var t=e.title,a=e.content;return r.a.createElement(C.a,null,r.a.createElement(x.a,{lg:"4"},r.a.createElement("h2",null,t),r.a.createElement("p",null,a),r.a.createElement("p",null,r.a.createElement(ue.a,{to:"/",className:"btn btn-primary"},"Go Home"))))};Te.defaultProps={title:"Uh oh",content:"An unexpected error came up"};var Le=Te,Re=function(e){var t=e.error,a=e.loading,n=e.events;if(t)return r.a.createElement(Le,{content:t});var c=n.map(function(e){return r.a.createElement(ke.a,{className:"p-card",key:"".concat(e.id)},r.a.createElement(Ce.a,null,r.a.createElement(xe.a,null,e.title.length>=60?"".concat(e.title.substring(0,60)," ..."):e.title),r.a.createElement(Pe.a,null,e.body.length>=120?"".concat(e.body.substring(0,100)," ..."):e.body),r.a.createElement(ue.a,{className:"btn btn-primary",to:"/event/".concat(e.id)},"View Event ",r.a.createElement("i",{className:"icon-arrow-right"}))))});return r.a.createElement("div",null,r.a.createElement(C.a,{className:a?"content-loading":""},c))};Re.defaultProps={error:null};var Ae=Re,Fe=a(201),De=a(200),Ue=function(){return r.a.createElement(C.a,null,r.a.createElement(x.a,{md:{size:6,offset:3}},r.a.createElement("div",{className:"page-is-loading"},r.a.createElement(De.a,{bar:!0,animated:!0,value:"100"},"Loading"))))},Me=function(e){var t=e.error,a=e.loading,n=e.events,c=e.eventId;if(a)return r.a.createElement(Ue,null);if(t)return r.a.createElement(Le,{content:t});var l=null;return c&&n&&(l=n.find(function(e){return e.id===c})),l?r.a.createElement("div",null,r.a.createElement(P.Helmet,null,r.a.createElement("title",null,l.title)),r.a.createElement(C.a,{className:"pb-3"},r.a.createElement(x.a,{sm:"12"},r.a.createElement(ue.a,{className:"btn btn-primary",to:"/events"},r.a.createElement("i",{className:"icon-arrow-left"})," Back"))),r.a.createElement(C.a,null,r.a.createElement(x.a,{sm:"12"},r.a.createElement("h1",null,l.title.length>=100?"".concat(l.title.substring(0,100)," ..."):l.title),r.a.createElement("p",null,"by: ",l.author))),r.a.createElement(C.a,null,r.a.createElement(x.a,{lg:"4",className:"event-view-card"},r.a.createElement(ke.a,{style:{backgroundColor:"#6A6E74"}},r.a.createElement(Fe.a,null," About this event "),r.a.createElement(Ce.a,{style:{backgroundColor:"#606060"}},r.a.createElement(Pe.a,null,l.body)))),r.a.createElement(x.a,{lg:"4",className:"event-view-card"},r.a.createElement(ke.a,{style:{backgroundColor:"#6A6E74"}},r.a.createElement(Fe.a,null," Details "),r.a.createElement(Pe.a,{style:{backgroundColor:"#606060"}},l.details))),r.a.createElement(x.a,{lg:"4",className:"event-view-card"},r.a.createElement(ke.a,{style:{backgroundColor:"#6A6E74"}},r.a.createElement(Fe.a,null," info "),r.a.createElement(Pe.a,{style:{backgroundColor:"#606060"}},l.info))))):r.a.createElement(Le,{content:I.event404})};Me.defaultProps={error:null};var _e=Me;function Ie(e){return Be.apply(this,arguments)}function Be(){return(Be=Object(_.a)(M.a.mark(function e(t){var a,n;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object.values(t).map(function(){var e=Object(_.a)(M.a.mark(function e(t){var a;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.child("users").child(t.id).once("value").then(function(e){return e.val()}).catch(function(){return null});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(a);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ve(e){return ze.apply(this,arguments)}function ze(){return(ze=Object(_.a)(M.a.mark(function e(t){var a,n;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.child("chat-messages").child(t).once("value").then(function(e){var t=e.val();return Object.values(t)}).catch(function(){return null});case 2:return a=e.sent,e.next=5,a;case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function He(e){return We.apply(this,arguments)}function We(){return(We=Object(_.a)(M.a.mark(function e(t){var a,n;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.child("chats").child(t).once("value").then(function(){var e=Object(_.a)(M.a.mark(function e(t){var a,n,r,c;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.val(),e.next=3,Ie(a.authorizedUsers);case 3:return n=e.sent,e.next=6,Ve(a.chatId);case 6:return r=e.sent,c={id:a.chatId,name:a.name,authorizedUsers:n,messages:r},e.abrupt("return",c);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(){return null});case 2:return a=e.sent,e.next=5,a;case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}var qe=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(a=Object(A.a)(this,(e=Object(F.a)(t)).call.apply(e,[this].concat(c)))).state={error:null,loading:!1},a.componentDidMount=function(){a.fetchData()},a.fetchData=function(e){var t=a.props,n=t.fetchChats,r=t.member;return n(e).then(function(){return n(r.uid)}).then(function(){return a.setState({loading:!1,error:null})}).catch(function(e){return a.setState({loading:!1,error:e})})},a.render=function(){var e=a.props,t=e.Layout,n=e.chats,c=e.match,l=e.member,o=a.state,s=o.loading,i=o.error,u=c&&c.params&&c.params.id?c.params.id:null;return r.a.createElement(t,{member:l,chatId:u,error:i,loading:s,chats:n.chats,reFetch:function(){return a.fetchData()}})},a}return Object(D.a)(t,e),t}(n.Component);qe.defaultProps={match:null};var Je={fetchChats:function(e){return null===G?function(){return new Promise(function(e){return e()})}:function(t){return new Promise(function(a){return Y.child("user-chats").child(e).on("value",function(){var e=Object(_.a)(M.a.mark(function e(n){var r,c,l,o,s;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(r=n.val()||null)){e.next=12;break}return c=Object.values(r.chats).map(function(){var e=Object(_.a)(M.a.mark(function e(t){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,He(t.id);case 2:return e.t0=e.sent,e.abrupt("return",{chat:e.t0});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e.next=5,Promise.all(c);case 5:return l=e.sent,o=[],l.forEach(function(e){null!==e.chat.messages&&o.push(e)}),e.next=10,Promise.all(o);case 10:(s=e.sent).length>=1&&a(t({type:"CHATS_REPLACE",data:s}));case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}).catch(function(){return null})}}},Ye=Object(o.b)(function(e){return{chats:e.chats||{},member:e.member||{}}},Je)(qe),Ge=function(e){var t=e.error,a=e.loading,n=e.chats;if(t)return r.a.createElement(Le,{content:t});var c=n.map(function(e){return r.a.createElement(ke.a,{className:"chat-card",key:"".concat(e.id)},r.a.createElement(Ce.a,{className:"chat-body"},r.a.createElement(ue.a,{key:e.id,style:{width:"100%"},to:"/chat/".concat(e.id)},r.a.createElement(Pe.a,{className:"chat-card-title"},e.name)),r.a.createElement(Ce.a,{className:"chat-participants"},e.authorizedUsers.map(function(e){return r.a.createElement(ue.a,{key:e.id,className:"chat-card-text",to:"/member/".concat(e.id)},r.a.createElement(Pe.a,{className:"chat-card-text"},"<",e.userName,">"))}))))});return r.a.createElement("div",null,r.a.createElement(C.a,{className:a?"content-loading":""},r.a.createElement(x.a,{sm:"12"},c)))};Ge.defaultProps={error:null};var Ke=Ge,Xe=a(18),Ze=a(202),$e=a(203),Qe=a(204),et=a(99),tt=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(A.a)(this,Object(F.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(Xe.a)({},e.target.name,e.target.value))},a.OnSubmit=function(){(0,a.props.handleCounter)(a.state.reply),a.setState({reply:""})},a.state={reply:""},a.handleChange=a.handleChange.bind(Object(te.a)(Object(te.a)(a))),a}return Object(D.a)(t,e),Object(ee.a)(t,[{key:"render",value:function(){var e=this,t=this.state.reply;return r.a.createElement(ke.a,{className:"reply-card"},r.a.createElement(Ce.a,null,r.a.createElement(Ze.a,null,r.a.createElement($e.a,null,r.a.createElement(Qe.a,{className:"text-area",type:"textarea",rows:"10",name:"reply",id:"reply",placeholder:"...enter a body...",value:t,onChange:this.handleChange})),r.a.createElement(et.a,{onClick:function(){e.OnSubmit()},color:"primary"},"Reply to conversation"))))}}]),t}(r.a.Component),at=Object(o.b)(function(e){return{reply:e.reply||""}},{})(tt);var nt=function(e){var t=e.error,a=e.loading,n=e.chats,c=e.chatId,l=e.member,o=e.reFetch;if(a)return r.a.createElement(Ue,null);if(t)return r.a.createElement(Le,{content:t});var s=null;c&&n&&(s=n.find(function(e){return e.id===c}));var i=function(){var e=s.messages.map(function(e){return r.a.createElement(ke.a,{className:"chat-card-body",key:"".concat(e.id)},r.a.createElement(Ce.a,{className:"chat-card-timestamp-body"},r.a.createElement(Pe.a,{className:"chat-card-timestamp-text"},new Date(+e.timestamp).toLocaleString())),r.a.createElement(Ce.a,{className:"chat-card-main-body"},r.a.createElement(Ce.a,{className:"chat-card-author-body"},r.a.createElement("img",{className:"chat-card-author-img",src:"https://i.imgur.com/Dxkqw0C.png",alt:" "}),r.a.createElement(ue.a,{style:{width:"100%"},to:"/member/".concat(e.author.id)},r.a.createElement(Pe.a,{className:"chat-card-author-text"},function(e){var t=null;return e&&s.authorizedUsers&&(t=s.authorizedUsers.find(function(t){return t.id===e})),t.userName}(e.author.id)))),r.a.createElement(Ce.a,{className:"chat-card-message-body"},r.a.createElement(Pe.a,{className:"chat-card-message-text"},e.message))))});return r.a.createElement("div",null,r.a.createElement(C.a,{className:a?"content-loading":""},e))},u=function(){return r.a.createElement(C.a,{className:"pb-3"},r.a.createElement(x.a,{sm:"12"},r.a.createElement(ue.a,{className:"btn btn-primary",to:"/chats"},r.a.createElement("i",{className:"icon-arrow-left"})," Back")))};if(!s)return r.a.createElement(Le,{content:I.chat404});return r.a.createElement("div",null,r.a.createElement(u,null),r.a.createElement(C.a,{className:a?"content-loading":""},r.a.createElement(x.a,{sm:"12"},r.a.createElement(i,null)),r.a.createElement(at,{handleCounter:function(e){var t=e,a={id:l.uid},n=(new Date).getTime();!function(e,t,a,n){Y.child("chat-messages/").child(e).push({id:Y.child("chat-messages/").child(e).push().key,messagetext:t,author:a,timestamp:n}).catch(function(e){console.log(e)})}(c,t,a,n),o()}})))};nt.defaultProps={error:null};var rt=nt;var ct=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(a=Object(A.a)(this,(e=Object(F.a)(t)).call.apply(e,[this].concat(c)))).componentDidMount=function(){return a.fetchMembers()},a.fetchMembers=function(){var e=a.props,t=e.fetchMembers,n=e.showError,r=e.fetchMemberTypes;return t().then(function(){return r()}).catch(function(e){return console.log("Error: ".concat(e)),n(e)})},a.render=function(){var e=a.props,t=e.Layout,n=e.members,c=e.match,l=c&&c.params&&c.params.id?c.params.id:null;return r.a.createElement(t,{memberId:l,error:n.error,loading:n.loading,members:n.members,reFetch:function(){return a.fetchMembers()}})},a}return Object(D.a)(t,e),t}(n.Component);ct.defaultProps={match:null};var lt={fetchMembers:function(){return null===G?function(){return new Promise(function(e){return e()})}:function(e){return new Promise(function(t){return Y.child("users").on("value",function(a){var n=a.val()||[];return t(e({type:"MEMBERS_REPLACE",data:n}))})}).catch(function(e){return console.log(e)})}},fetchMemberTypes:function(){return null===G?function(){return new Promise(function(e){return e()})}:function(e){return new Promise(function(t,a){return Y.child("memberTypes").once("value").then(function(a){var n=a.val()||[];return t(e({type:"MEMBERTYPES_REPLACE",data:n}))}).catch(a)}).catch(function(e){return console.log(e)})}},showError:function(e){return function(t){return new Promise(function(a){return a(t({type:"MEMBERS_ERROR",data:e}))})}}},ot=Object(o.b)(function(e){return{members:e.members||{}}},lt)(ct),st=a(102),it=function(e){var t=e.error,a=e.loading,n=e.members;if(t)return r.a.createElement(Le,{content:t});var c=n.map(function(e){return r.a.createElement(ke.a,{className:"member-card",key:"".concat(e.id)},r.a.createElement(st.a,{overlayStyle:{background:"rgba(0, 0, 0, 0.4)"},closeOnDocumentClick:!0,modal:!0,trigger:r.a.createElement(Ce.a,{className:"body"},r.a.createElement("img",{className:"img",src:"https://i.imgur.com/Dxkqw0C.png",alt:" "}),r.a.createElement(Pe.a,{className:"text"},e.userName))},r.a.createElement(ke.a,{className:"popup-card"},r.a.createElement(Ce.a,{className:"popup-body"},r.a.createElement("img",{className:"popup-img",src:"https://i.imgur.com/Dxkqw0C.png",alt:" "}),r.a.createElement(Ce.a,{className:"popup-text-body"},r.a.createElement(Pe.a,{className:"popup-title"},r.a.createElement(ue.a,{to:"/member/".concat(e.id)},"".concat(e.userName,"'s Profile Page"))),r.a.createElement(Pe.a,{className:"popup-text"},r.a.createElement(ue.a,{to:{pathname:"/newchat",chatTarget:e}},"Send a private message")))))))});return r.a.createElement("div",null,r.a.createElement(C.a,{className:a?"content-loading":""},r.a.createElement(x.a,{sm:"12"},c)))};it.defaultProps={error:null};var ut=it,mt=function(e){var t=e.error,a=e.loading,n=e.members,c=e.memberId;if(a)return r.a.createElement(Ue,null);if(t)return r.a.createElement(Le,{content:t});var l=null;return c&&n&&(l=n.find(function(e){return e.id===c})),l?r.a.createElement("div",null,r.a.createElement(C.a,{className:"pb-3"},r.a.createElement(x.a,{sm:"12"},r.a.createElement(ue.a,{className:"btn btn-primary",to:"/members"},r.a.createElement("i",{className:"icon-arrow-left"})," Back"))),r.a.createElement(C.a,null,r.a.createElement(x.a,{sm:"12"},r.a.createElement("h1",null,"".concat(l.userName)))),r.a.createElement(C.a,null,r.a.createElement(x.a,{lg:"4",className:"members-view-card"},r.a.createElement(ke.a,{style:{backgroundColor:"#6A6E74"}},r.a.createElement(Fe.a,null," About this member "),r.a.createElement(Ce.a,{style:{backgroundColor:"#606060"}},r.a.createElement(Pe.a,null,l.userName)))),r.a.createElement(x.a,{lg:"4",className:"members-view-card"},r.a.createElement(ke.a,{style:{backgroundColor:"#6A6E74"}},r.a.createElement(Fe.a,null," Details "),r.a.createElement(Pe.a,{style:{backgroundColor:"#606060"}},l.userName))),r.a.createElement(x.a,{lg:"4",className:"members-view-card"},r.a.createElement(ke.a,{style:{backgroundColor:"#6A6E74"}},r.a.createElement(Fe.a,null," info "),r.a.createElement(Pe.a,{style:{backgroundColor:"#606060"}},l.userName))))):r.a.createElement(Le,{content:I.member404})};mt.defaultProps={error:null};var dt=mt,ht=a(205),pt=a(206);var Et=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(A.a)(this,Object(F.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(Xe.a)({},e.target.name,e.target.value))},a.state={title:"",body:"",details:"",info:"",category:0,imageurl:""},a.handleChange=a.handleChange.bind(Object(te.a)(Object(te.a)(a))),a}return Object(D.a)(t,e),Object(ee.a)(t,[{key:"render",value:function(){var e=this.props.member,t=this.state,a=t.title,n=t.body,c=t.details,l=t.info,o=t.imageurl,s=t.category;return r.a.createElement("div",null,r.a.createElement(C.a,null,r.a.createElement(x.a,{sm:"12"},r.a.createElement(ue.a,{className:"btn btn-primary",to:"/"},r.a.createElement("i",{className:"icon-arrow-left"})," Back")),r.a.createElement(x.a,null,r.a.createElement(ke.a,{style:{backgroundColor:"#606060",top:25}},r.a.createElement(Fe.a,{style:{backgroundColor:"black"}}," Create a new event "),r.a.createElement(Ce.a,null,r.a.createElement(Ze.a,null,r.a.createElement($e.a,null,r.a.createElement(ht.a,{for:"title"}," title "),r.a.createElement(Qe.a,{className:"text-area",type:"title",name:"title",id:"title",placeholder:"...enter a title...",value:a,onChange:this.handleChange})),r.a.createElement($e.a,null,r.a.createElement(ht.a,{for:"imageurl"}," image "),r.a.createElement(Qe.a,{className:"text-area",type:"imageurl",name:"imageurl",id:"imageurl",placeholder:"...enter image url..",value:o,onChange:this.handleChange}),r.a.createElement($e.a,{style:o?{height:"100",width:"100%",marginTop:15}:{marginTop:15}},r.a.createElement(pt.a,{style:o?{height:"25%",width:"25%"}:{},top:!0,src:o,alt:""}))),r.a.createElement($e.a,null,r.a.createElement(ht.a,{for:"body"}," Body "),r.a.createElement(Qe.a,{className:"text-area",type:"textarea",rows:"10",name:"body",id:"body",placeholder:"...enter a body...",value:n,onChange:this.handleChange})),r.a.createElement($e.a,null,r.a.createElement(ht.a,{for:"details"}," details "),r.a.createElement(Qe.a,{className:"text-area",type:"textarea",rows:"4",name:"details",id:"details",placeholder:"...enter details...",value:c,onChange:this.handleChange})),r.a.createElement($e.a,null,r.a.createElement(ht.a,{for:"info"}," info "),r.a.createElement(Qe.a,{className:"text-area",type:"textarea",rows:"2",name:"info",id:"info",placeholder:"...enter info ...",value:l,onChange:this.handleChange})),r.a.createElement(et.a,{onClick:function(){!function(e,t,a,n,r,c,l){Y.child("events/").push({id:Y.child("events/").push().key,slug:e.replace(/\s/g,"-"),title:e,body:t,author:a,category:n,image:r,info:c,details:l}).catch(function(e){console.log(e)})}(a,n,e.userName,s,o,l,c)},color:"primary"}," Submit new event")))))))}}]),t}(r.a.Component);Et.defaultProps={member:{}};var bt=Et,ft=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(a=Object(A.a)(this,(e=Object(F.a)(t)).call.apply(e,[this].concat(c)))).state={errorMessage:null},a.onFormSubmit=function(e){return(0,a.props.onFormSubmit)(e).catch(function(e){throw a.setState({errorMessage:e}),e})},a.render=function(){var e=a.props,t=e.member,n=e.Layout,c=e.isLoading,l=a.state.errorMessage;return r.a.createElement(n,{member:t,loading:c,error:l,onFormSubmit:a.onFormSubmit})},a}return Object(D.a)(t,e),t}(n.Component),gt={onFormSubmit:K},vt=Object(o.b)(function(e){return{member:e.member||{},isLoading:e.status.loading||!1}},gt)(ft);var yt=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(A.a)(this,Object(F.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(Xe.a)({},e.target.name,e.target.value))},a.state={title:"",message:""},a.handleChange=a.handleChange.bind(Object(te.a)(Object(te.a)(a))),a}return Object(D.a)(t,e),Object(ee.a)(t,[{key:"render",value:function(){var e,t=this.props,a=t.member,n=t.chatTarget,c=a.uid,l={id:c},o=n.id,s=(e={},Object(Xe.a)(e,c,{id:c}),Object(Xe.a)(e,o,{id:o}),e),i=this.state,u=i.title,m=i.message;return r.a.createElement("div",null,r.a.createElement(C.a,null,r.a.createElement(x.a,{sm:"12"},r.a.createElement(ue.a,{className:"btn btn-primary",to:"/"},r.a.createElement("i",{className:"icon-arrow-left"})," Back")),r.a.createElement(x.a,null,r.a.createElement(ke.a,{style:{backgroundColor:"#606060",top:25}},r.a.createElement(Fe.a,{style:{backgroundColor:"black"}},"Start a chat with ".concat(n.userName)),r.a.createElement(Ce.a,null,r.a.createElement(Ze.a,null,r.a.createElement($e.a,null,r.a.createElement(ht.a,{for:"title"}," title "),r.a.createElement(Qe.a,{className:"text-area",type:"title",name:"title",id:"title",placeholder:"...enter a title...",value:u,onChange:this.handleChange}),r.a.createElement(ht.a,{for:"message"}," message "),r.a.createElement(Qe.a,{className:"text-area",type:"message",name:"message",id:"message",placeholder:"...enter a message...",value:m,onChange:this.handleChange})),r.a.createElement(et.a,{onClick:function(){console.log({title:u,author:l,AuthorizedUsersObject:s,message:m}),function(e,t,a,n){var r=(new Date).getTime(),c=Y.child("chats/").push().key;Y.child("chats/".concat(c)).set({chatId:c,name:e,createdByUserId:t.id,createdAt:r,authorizedUsers:a}),Y.child("chat-messages/").child(c).push({id:Y.child("chat-messages/").child(c).push().key,messagetext:n,author:t,timestamp:r}),Object.values(a).map(function(e){return{id:e.id}}).forEach(function(e){Y.child("user-chats/".concat(e.id,"/chats/").concat(c)).set({id:c})})}(u,l,s,m)},color:"primary"}," Create chat")))))))}}]),t}(r.a.Component);yt.defaultProps={member:{},chatTarget:{}};var wt=yt,Ot=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(a=Object(A.a)(this,(e=Object(F.a)(t)).call.apply(e,[this].concat(c)))).state={errorMessage:null},a.onFormSubmit=function(e){return(0,a.props.onFormSubmit)(e).catch(function(e){throw a.setState({errorMessage:e}),e})},a.render=function(){var e=a.props,t=e.member,n=e.Layout,c=e.isLoading,l=e.location.chatTarget,o=a.state.errorMessage;return r.a.createElement(n,{member:t,loading:c,error:o,onFormSubmit:a.onFormSubmit,chatTarget:l})},a}return Object(D.a)(t,e),t}(n.Component),jt={onFormSubmit:K},Nt=Object(o.b)(function(e){return{member:e.member||{},isLoading:e.status.loading||!1,chatTarget:e.chatTarget}},jt)(Ot),St=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(a=Object(A.a)(this,(e=Object(F.a)(t)).call.apply(e,[this].concat(c)))).state={error:null,success:null,loading:!1},a.onFormSubmit=function(e){var t=a.props.onFormSubmit;return a.setState({loading:!0}),t(e).then(function(){return a.setState({loading:!1,success:"Success - You are now a member",error:null})}).catch(function(e){throw a.setState({loading:!1,success:null,error:e}),e})},a.render=function(){var e=a.props,t=e.member,n=e.Layout,c=a.state,l=c.error,o=c.loading,s=c.success;return r.a.createElement(n,{error:l,member:t,loading:o,success:s,onFormSubmit:a.onFormSubmit})},a}return Object(D.a)(t,e),t}(n.Component),kt={onFormSubmit:K},Ct=Object(o.b)(function(e){return{member:e.member||{}}},kt)(St),xt=a(212),Pt=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(A.a)(this,Object(F.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(Xe.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t=a.props,n=t.onFormSubmit,r=t.history;n(a.state).then(function(){return r.push("/login")}).catch(function(e){return console.log("Error: ".concat(e))})},a.state={userName:"",email:"",password:"",password2:""},a.handleChange=a.handleChange.bind(Object(te.a)(Object(te.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(te.a)(Object(te.a)(a))),a}return Object(D.a)(t,e),Object(ee.a)(t,[{key:"render",value:function(){var e=this.props.error,t=this.state,a=t.userName,n=t.email,c=t.password,l=t.password2;return r.a.createElement("div",null,r.a.createElement(C.a,null,r.a.createElement(x.a,{lg:{size:6,offset:3}},r.a.createElement(ke.a,null,r.a.createElement(Fe.a,null,"Sign Up"),r.a.createElement(Ce.a,null,!!e&&r.a.createElement(xt.a,{color:"danger"},e),r.a.createElement(Ze.a,{onSubmit:this.handleSubmit},r.a.createElement($e.a,null,r.a.createElement(ht.a,{for:"email"},"Email"),r.a.createElement(Qe.a,{type:"email",name:"email",id:"email",placeholder:"john@doe.corp",value:n,onChange:this.handleChange})),r.a.createElement($e.a,null,r.a.createElement(ht.a,{for:"userName"},"UserName"),r.a.createElement(Qe.a,{type:"username",name:"userName",id:"userName",placeholder:"John",value:a,onChange:this.handleChange})),r.a.createElement($e.a,null,r.a.createElement(ht.a,{for:"password"},"Password"),r.a.createElement(Qe.a,{type:"password",name:"password",id:"password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",value:c,onChange:this.handleChange})),r.a.createElement($e.a,null,r.a.createElement(ht.a,{for:"password2"},"Confirm Password"),r.a.createElement(Qe.a,{type:"password",name:"password2",id:"password2",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",value:l,onChange:this.handleChange})),r.a.createElement(et.a,{color:"primary"},"Sign Up!")),r.a.createElement("hr",null),r.a.createElement(C.a,null,r.a.createElement(x.a,{sm:"12"},"Already have an account?",r.a.createElement(ue.a,{to:"/login"},"Login"))))))))}}]),t}(r.a.Component);Pt.defaultProps={error:null};var Tt=Object(me.a)(Pt),Lt=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(a=Object(A.a)(this,(e=Object(F.a)(t)).call.apply(e,[this].concat(c)))).state={error:null,success:null,loading:!1},a.onFormSubmit=function(e){var t=a.props.onFormSubmit;return a.setState({loading:!0}),t(e).then(function(){return a.setState({loading:!1,success:"Success - Logged in",error:null})}).catch(function(e){throw a.setState({loading:!1,success:null,error:e}),e})},a.render=function(){var e=a.props,t=e.member,n=e.Layout,c=a.state,l=c.error,o=c.loading,s=c.success;return r.a.createElement(n,{error:l,member:t,loading:o,success:s,onFormSubmit:a.onFormSubmit})},a}return Object(D.a)(t,e),t}(n.Component),Rt={onFormSubmit:function(e){var t=e.email,a=e.password;return function(e){return new Promise(function(){var n=Object(_.a)(M.a.mark(function n(r,c){return M.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return",c({message:I.missingEmail}));case 2:if(a){n.next=4;break}return n.abrupt("return",c({message:I.missingPassword}));case 4:return n.abrupt("return",G.auth().setPersistence(G.auth.Auth.Persistence.LOCAL).then(function(){return G.auth().signInWithEmailAndPassword(t,a).then(function(){var t=Object(_.a)(M.a.mark(function t(a){var n;return M.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(n=a&&a.user?a.user:null).uid&&(Y.child("users/".concat(n.uid)).update({lastLoggedIn:G.database.ServerValue.TIMESTAMP}),!1===n.emailVerified&&G.auth().currentUser.sendEmailVerification().catch(function(){return console.log("Verification email failed to send")}),X(e)),t.abrupt("return",r(e({type:"USER_LOGIN",data:n})));case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(c)}));case 5:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}()).catch(function(e){throw e.message})}}},At=Object(o.b)(function(e){return{member:e.member||{}}},Rt)(Lt),Ft=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(A.a)(this,Object(F.a)(t).call(this,e))).handleChange=function(e){return a.setState(Object(Xe.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t=a.props,n=t.onFormSubmit,r=t.history;return n(a.state).then(function(){return setTimeout(function(){return r.push("/")},1e3)}).catch(function(){})},a.state={email:e.member&&e.member.email?e.member.email:"",password:""},a.handleChange=a.handleChange.bind(Object(te.a)(Object(te.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(te.a)(Object(te.a)(a))),a}return Object(D.a)(t,e),Object(ee.a)(t,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.success,n=e.error,c=this.state,l=c.email,o=c.password;return r.a.createElement("div",null,r.a.createElement(C.a,null,r.a.createElement(x.a,{lg:{size:6,offset:3}},r.a.createElement(ke.a,null,r.a.createElement(Fe.a,null,"Login"),r.a.createElement(Ce.a,null,!!a&&r.a.createElement(xt.a,{color:"success"},a),!!n&&r.a.createElement(xt.a,{color:"danger"},n),r.a.createElement(Ze.a,{onSubmit:this.handleSubmit},r.a.createElement($e.a,null,r.a.createElement(ht.a,{for:"email"},"Email"),r.a.createElement(Qe.a,{type:"email",name:"email",id:"email",placeholder:"john@doe.corp",disabled:t,value:l,onChange:this.handleChange})),r.a.createElement($e.a,null,r.a.createElement(ht.a,{for:"password"},"Password"),r.a.createElement(Qe.a,{type:"password",name:"password",id:"password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",disabled:t,value:o,onChange:this.handleChange})),r.a.createElement(et.a,{color:"primary",disabled:t},t?"Loading":"Login")),r.a.createElement("hr",null),r.a.createElement(C.a,null,r.a.createElement(x.a,{sm:"6"},"Need an account?"," ",r.a.createElement(ue.a,{to:"/sign-up"},"Sign Up")),r.a.createElement(x.a,{sm:"6",className:"text-right"},r.a.createElement(ue.a,{to:"/forgot-password"},"Forgot Password?"))))))))}}]),t}(r.a.Component);Ft.defaultProps={error:null,success:null,member:{}};var Dt=Object(me.a)(Ft),Ut=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(a=Object(A.a)(this,(e=Object(F.a)(t)).call.apply(e,[this].concat(c)))).state={error:null,success:null,loading:!1},a.onFormSubmit=function(e){var t=a.props.onFormSubmit;return a.setState({loading:!0}),t(e).then(function(){return a.setState({loading:!1,success:"Success - Reset link emailed",error:null})}).catch(function(e){throw a.setState({loading:!1,success:null,error:e}),e})},a.render=function(){var e=a.props,t=e.member,n=e.Layout,c=a.state,l=c.error,o=c.loading,s=c.success;return r.a.createElement(n,{error:l,member:t,loading:o,success:s,onFormSubmit:a.onFormSubmit})},a}return Object(D.a)(t,e),t}(n.Component),Mt={onFormSubmit:function(e){var t=e.email;return function(e){return new Promise(function(){var a=Object(_.a)(M.a.mark(function a(n,r){return M.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t){a.next=2;break}return a.abrupt("return",r({message:I.missingEmail}));case 2:return a.abrupt("return",G.auth().sendPasswordResetEmail(t).then(function(){return n(e({type:"USER_RESET"}))}).catch(r));case 3:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}()).catch(function(e){throw e.message})}}},_t=Object(o.b)(function(e){return{member:e.member||{}}},Mt)(Ut),It=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(A.a)(this,Object(F.a)(t).call(this,e))).handleChange=function(e){return a.setState(Object(Xe.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t=a.props,n=t.onFormSubmit,r=t.history;return n(a.state).then(function(){return setTimeout(function(){return r.push("/login")},1e3)}).catch(function(){})},a.state={email:e.member&&e.member.email?e.member.email:""},a.handleChange=a.handleChange.bind(Object(te.a)(Object(te.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(te.a)(Object(te.a)(a))),a}return Object(D.a)(t,e),Object(ee.a)(t,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.error,n=e.success,c=this.state.email;return r.a.createElement("div",null,r.a.createElement(C.a,null,r.a.createElement(x.a,{lg:{size:6,offset:3}},r.a.createElement(ke.a,null,r.a.createElement(Fe.a,null,"Forgot Password"),r.a.createElement(Ce.a,null,!!a&&r.a.createElement(xt.a,{color:"danger"},a),!!n&&r.a.createElement(xt.a,{color:"success"},n),r.a.createElement(Ze.a,{onSubmit:this.handleSubmit},r.a.createElement($e.a,null,r.a.createElement(ht.a,{for:"email"},"Email"),r.a.createElement(Qe.a,{type:"email",name:"email",id:"email",placeholder:"john@doe.corp",value:c,disabled:t,onChange:this.handleChange})),r.a.createElement(et.a,{color:"primary",disabled:t},t?"Loading":"Reset Password")),r.a.createElement("hr",null),r.a.createElement(C.a,null,r.a.createElement(x.a,{sm:"6"},"Need an account?"," ",r.a.createElement(ue.a,{to:"/sign-up"},"Sign Up")),r.a.createElement(x.a,{sm:"6",className:"text-right"},r.a.createElement(ue.a,{to:"/login"},"Login")," ","to your account.")))))))}}]),t}(r.a.Component);It.defaultProps={error:null,success:null,member:{}};var Bt=Object(me.a)(It),Vt=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(a=Object(A.a)(this,(e=Object(F.a)(t)).call.apply(e,[this].concat(c)))).state={error:null,success:null,loading:!1},a.onFormSubmit=function(e){var t=a.props.onFormSubmit;return a.setState({loading:!0}),t(e).then(function(){return a.setState({loading:!1,success:"Success - Updated",error:null})}).catch(function(e){return a.setState({loading:!1,success:null,error:e})})},a.render=function(){var e=a.props,t=e.member,n=e.Layout,c=a.state,l=c.error,o=c.loading,s=c.success;return r.a.createElement(n,{error:l,member:t,loading:o,success:s,onFormSubmit:a.onFormSubmit})},a}return Object(D.a)(t,e),t}(n.Component),zt={onFormSubmit:function(e){var t=e.email,a=e.password,n=e.password2,r=e.userName,c=e.changeEmail,l=e.changePassword;return function(e){return new Promise(function(){var o=Object(_.a)(M.a.mark(function o(s,i){var u;return M.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(u=G.auth().currentUser.uid){o.next=3;break}return o.abrupt("return",i({message:I.missingUserName}));case 3:if(r){o.next=5;break}return o.abrupt("return",i({message:I.missingUserName}));case 5:if(!c){o.next=8;break}if(t){o.next=8;break}return o.abrupt("return",i({message:I.missingEmail}));case 8:if(!l){o.next=15;break}if(a){o.next=11;break}return o.abrupt("return",i({message:I.missingPassword}));case 11:if(n){o.next=13;break}return o.abrupt("return",i({message:I.missingPassword}));case 13:if(a===n){o.next=15;break}return o.abrupt("return",i({message:I.passwordsDontMatch}));case 15:return o.abrupt("return",Y.child("users/".concat(u)).update({userName:r}).then(Object(_.a)(M.a.mark(function n(){return M.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!c){n.next=3;break}return n.next=3,G.auth().currentUser.updateEmail(t).catch(i);case 3:if(!l){n.next=6;break}return n.next=6,G.auth().currentUser.updatePassword(a).catch(i);case 6:return n.abrupt("return",s(X(e)));case 7:case"end":return n.stop()}},n)}))).catch(i));case 16:case"end":return o.stop()}},o)}));return function(e,t){return o.apply(this,arguments)}}()).catch(function(e){throw e.message})}}},Ht=Object(o.b)(function(e){return{member:e.member||{}}},zt)(Vt),Wt=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(A.a)(this,Object(F.a)(t).call(this,e))).handleChange=function(e){var t="checkbox"===e.target.type?e.target.checked:e.target.value;a.setState(Object(Xe.a)({},e.target.name,t))},a.handleSubmit=function(e){e.preventDefault(),(0,a.props.onFormSubmit)(a.state).catch(function(){})},a.state={userName:e.member.userName||"",email:e.member.email||"",password:"",password2:"",changeEmail:!1,changePassword:!1},a.handleChange=a.handleChange.bind(Object(te.a)(Object(te.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(te.a)(Object(te.a)(a))),a}return Object(D.a)(t,e),Object(ee.a)(t,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.success,n=e.error,c=this.state,l=c.userName,o=c.changeEmail,s=c.email,i=c.changePassword,u=c.password,m=c.password2;return r.a.createElement("div",null,r.a.createElement(C.a,null,r.a.createElement(x.a,{lg:{size:6,offset:3}},r.a.createElement(ke.a,{className:"profile"},r.a.createElement(Fe.a,{className:"header"},"Update Profile"),r.a.createElement(Ce.a,null,!!n&&r.a.createElement(xt.a,{color:"danger"},n),!!a&&r.a.createElement(xt.a,{color:"success"},a),r.a.createElement(Ze.a,{onSubmit:this.handleSubmit},r.a.createElement($e.a,null,r.a.createElement(ht.a,{for:"userName",style:{margin:0}},"Username"),r.a.createElement(Qe.a,{className:"text",type:"text",name:"userName",id:"userName",placeholder:"John",value:l,onChange:this.handleChange})),r.a.createElement($e.a,{check:!0,style:{marginTop:20,marginBottom:10}},r.a.createElement(ht.a,{check:!0},r.a.createElement(Qe.a,{type:"checkbox",name:"changeEmail",checked:o,onChange:this.handleChange})," Change my email ")),o&&r.a.createElement($e.a,null,r.a.createElement(ht.a,{for:"email",style:{margin:0}},"New Email address"),r.a.createElement(Qe.a,{className:"text",type:"email",name:"email",id:"email",placeholder:"john@doe.corp",value:s,onChange:this.handleChange})),r.a.createElement($e.a,{check:!0,style:{marginTop:20,marginBottom:10}},r.a.createElement(ht.a,{check:!0},r.a.createElement(Qe.a,{type:"checkbox",name:"changePassword",checked:i,onChange:this.handleChange})," Change my password ")),i&&r.a.createElement("div",null,r.a.createElement($e.a,null,r.a.createElement(ht.a,{for:"password",style:{margin:0}}," New password"),r.a.createElement(Qe.a,{className:"text",type:"password",name:"password",id:"password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",value:u,onChange:this.handleChange})),r.a.createElement($e.a,null,r.a.createElement(ht.a,{for:"password2",style:{margin:0}},"Confirm Password"),r.a.createElement(Qe.a,{className:"text",type:"password",name:"password2",id:"password2",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",value:m,onChange:this.handleChange}))),r.a.createElement(et.a,{style:{marginTop:20},color:"primary",disabled:t},t?"Loading":"Update Profile")))))))}}]),t}(r.a.Component);Wt.defaultProps={error:null,success:null};var qt=Wt,Jt=function(){return r.a.createElement(N.a,null,r.a.createElement(S.a,{exact:!0,path:"/",render:function(e){return r.a.createElement(ye,null,r.a.createElement(Oe,e))}}),r.a.createElement(S.a,{path:"/sign-up",render:function(e){return r.a.createElement(L,{pageTitle:"Sign Up"},r.a.createElement(Ct,Object.assign({},e,{Layout:Tt})))}}),r.a.createElement(S.a,{path:"/login",render:function(e){return r.a.createElement(L,{pageTitle:"Login"},r.a.createElement(At,Object.assign({},e,{Layout:Dt})))}}),r.a.createElement(S.a,{path:"/forgot-password",render:function(e){return r.a.createElement(L,{pageTitle:"Forgot Password"},r.a.createElement(_t,Object.assign({},e,{Layout:Bt})))}}),r.a.createElement(S.a,{path:"/update-profile",render:function(e){return r.a.createElement(ye,{pageTitle:"Update Profile"},r.a.createElement(Ht,Object.assign({},e,{Layout:qt})))}}),r.a.createElement(S.a,{path:"/newchat",render:function(e){return r.a.createElement(ye,{pageTitle:"Send a message"},r.a.createElement(Nt,Object.assign({},e,{Layout:wt})))}}),r.a.createElement(S.a,{path:"/events",render:function(e){return r.a.createElement(ye,{pageTitle:"Events"},r.a.createElement(Se,Object.assign({},e,{Layout:Ae})))}}),r.a.createElement(S.a,{path:"/event/:id",render:function(e){return r.a.createElement(ye,{pageTitle:"Event View"},r.a.createElement(Se,Object.assign({},e,{Layout:_e})))}}),r.a.createElement(S.a,{path:"/create-event",render:function(e){return r.a.createElement(ye,{pageTitle:"Create a Event"},r.a.createElement(vt,Object.assign({},e,{Layout:bt})))}}),r.a.createElement(S.a,{path:"/members",render:function(e){return r.a.createElement(ye,{pageTitle:"Members"},r.a.createElement(ot,Object.assign({},e,{Layout:ut})))}}),r.a.createElement(S.a,{path:"/member/:id",render:function(e){return r.a.createElement(ye,{pageTitle:"Member View"},r.a.createElement(ot,Object.assign({},e,{Layout:dt})))}}),r.a.createElement(S.a,{path:"/chats",render:function(e){return r.a.createElement(ye,{pageTitle:"Chats"},r.a.createElement(Ye,Object.assign({},e,{Layout:Ke})))}}),r.a.createElement(S.a,{path:"/chat/:id",render:function(e){return r.a.createElement(ye,{pageTitle:"Chat View"},r.a.createElement(Ye,Object.assign({},e,{Layout:rt})))}}),r.a.createElement(S.a,{render:function(e){return r.a.createElement(ye,{pageTitle:"404 - Page not found"},r.a.createElement(Le,Object.assign({},e,{title:"404",content:"Sorry, the route you requested does not exist"})))}}))},Yt=(a(180),j()),Gt=Yt.persistor,Kt=Yt.store,Xt=function(){return r.a.createElement(o.a,{store:Kt},r.a.createElement(i.a,{loading:r.a.createElement(Ue,null),persistor:Gt},r.a.createElement(s.a,null,r.a.createElement(Jt,null))))};l.a.render(r.a.createElement(Xt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[104,1,2]]]);
//# sourceMappingURL=main.853c1ec0.chunk.js.map